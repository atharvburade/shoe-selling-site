{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { Order } from 'src/app/shared/models/Order';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/cart.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"src/app/services/user.service\";\nimport * as i4 from \"ngx-toastr\";\nimport * as i5 from \"src/app/services/order.service\";\nimport * as i6 from \"@angular/router\";\nimport * as i7 from \"../../partials/title/title.component\";\nimport * as i8 from \"../../partials/text-input/text-input.component\";\nimport * as i9 from \"../../partials/order-items-list/order-items-list.component\";\nimport * as i10 from \"../../partials/map/map.component\";\nclass CheckoutPageComponent {\n  constructor(cartService, formBuilder, userService, toastrService, orderService, router) {\n    this.formBuilder = formBuilder;\n    this.userService = userService;\n    this.toastrService = toastrService;\n    this.orderService = orderService;\n    this.router = router;\n    this.order = new Order();\n    const cart = cartService.getCart();\n    this.order.items = cart.items;\n    this.order.totalPrice = cart.totalPrice;\n  }\n  ngOnInit() {\n    let {\n      name,\n      address\n    } = this.userService.currentUser;\n    this.checkoutForm = this.formBuilder.group({\n      name: [name, Validators.required],\n      address: [address, Validators.required]\n    });\n  }\n  get fc() {\n    return this.checkoutForm.controls;\n  }\n  createOrder() {\n    if (this.checkoutForm.invalid) {\n      this.toastrService.warning('Please fill the inputs', 'Invalid Inputs');\n      return;\n    }\n    if (!this.order.addressLatLng) {\n      this.toastrService.warning('Please select your location on the map', 'Location');\n      return;\n    }\n    this.order.name = this.fc.name.value;\n    this.order.address = this.fc.address.value;\n    this.orderService.create(this.order).subscribe({\n      next: () => {\n        this.router.navigateByUrl('/payment');\n      },\n      error: errorResponse => {\n        this.toastrService.error(errorResponse.error, 'Cart');\n      }\n    });\n  }\n}\nCheckoutPageComponent.ɵfac = function CheckoutPageComponent_Factory(t) {\n  return new (t || CheckoutPageComponent)(i0.ɵɵdirectiveInject(i1.CartService), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.UserService), i0.ɵɵdirectiveInject(i4.ToastrService), i0.ɵɵdirectiveInject(i5.OrderService), i0.ɵɵdirectiveInject(i6.Router));\n};\nCheckoutPageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CheckoutPageComponent,\n  selectors: [[\"app-checkout-page\"]],\n  decls: 14,\n  vars: 5,\n  consts: [[1, \"container\"], [1, \"content\"], [\"title\", \"Order Form\", \"fontSize\", \"1.6rem\"], [3, \"formGroup\"], [\"label\", \"Name\", 3, \"control\"], [\"label\", \"Address\", 3, \"control\"], [3, \"order\"], [1, \"map\"], [\"title\", \"Choose Your Address On Map\", \"fontSize\", \"1.6rem\"], [1, \"buttons-container\"], [1, \"buttons\"], [3, \"click\"]],\n  template: function CheckoutPageComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n      i0.ɵɵelement(2, \"app-title\", 2);\n      i0.ɵɵelementStart(3, \"form\", 3);\n      i0.ɵɵelement(4, \"text-input\", 4)(5, \"text-input\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(6, \"order-items-list\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 7);\n      i0.ɵɵelement(8, \"app-title\", 8)(9, \"map\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"div\", 9)(11, \"div\", 10)(12, \"button\", 11);\n      i0.ɵɵlistener(\"click\", function CheckoutPageComponent_Template_button_click_12_listener() {\n        return ctx.createOrder();\n      });\n      i0.ɵɵtext(13, \" Go To Payment \");\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"formGroup\", ctx.checkoutForm);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"control\", ctx.fc.name);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"control\", ctx.fc.address);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"order\", ctx.order);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"order\", ctx.order);\n    }\n  },\n  dependencies: [i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.FormGroupDirective, i7.TitleComponent, i8.TextInputComponent, i9.OrderItemsListComponent, i10.MapComponent],\n  styles: [\".container[_ngcontent-%COMP%]{\\n  margin-top: 1rem;\\n  display: flex;\\n  margin: 0 2rem 6rem 2rem;\\n  flex-wrap: wrap;\\n  justify-content: center;\\n}\\n\\n.content[_ngcontent-%COMP%]{\\n  width: 35rem;\\n  margin-right: 3rem;\\n}\\n\\n.content[_ngcontent-%COMP%], form[_ngcontent-%COMP%]{\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\nform[_ngcontent-%COMP%]{\\n  width: 100%;\\n}\\n\\n.buttons-container[_ngcontent-%COMP%]{\\n  flex-basis: 100%;\\n  display: flex;\\n  justify-content: center;\\n}\\n\\n.buttons[_ngcontent-%COMP%]{\\n  margin: 2rem;\\n  width: 35rem;\\n}\\n\\nbutton[_ngcontent-%COMP%]{\\n  color: white;\\n  background-color: black;\\n  width: 100%;\\n  height: 3rem;\\n  opacity: 0.8;\\n  font-size: 1.3rem;\\n  border: none;\\n  border-radius: 0.5rem;\\n  box-shadow: 2px 2px 2px 2px grey;\\n}\\n\\nbutton[_ngcontent-%COMP%]:hover{\\n  opacity: 1;\\n  cursor: pointer;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9wYWdlcy9jaGVja291dC1wYWdlL2NoZWNrb3V0LXBhZ2UuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGdCQUFnQjtFQUNoQixhQUFhO0VBQ2Isd0JBQXdCO0VBQ3hCLGVBQWU7RUFDZix1QkFBdUI7QUFDekI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixhQUFhO0VBQ2IsdUJBQXVCO0FBQ3pCOztBQUVBO0VBQ0UsWUFBWTtFQUNaLFlBQVk7QUFDZDs7QUFFQTtFQUNFLFlBQVk7RUFDWix1QkFBdUI7RUFDdkIsV0FBVztFQUNYLFlBQVk7RUFDWixZQUFZO0VBQ1osaUJBQWlCO0VBQ2pCLFlBQVk7RUFDWixxQkFBcUI7RUFDckIsZ0NBQWdDO0FBQ2xDOztBQUVBO0VBQ0UsVUFBVTtFQUNWLGVBQWU7QUFDakIiLCJzb3VyY2VzQ29udGVudCI6WyIuY29udGFpbmVye1xuICBtYXJnaW4tdG9wOiAxcmVtO1xuICBkaXNwbGF5OiBmbGV4O1xuICBtYXJnaW46IDAgMnJlbSA2cmVtIDJyZW07XG4gIGZsZXgtd3JhcDogd3JhcDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi5jb250ZW50e1xuICB3aWR0aDogMzVyZW07XG4gIG1hcmdpbi1yaWdodDogM3JlbTtcbn1cblxuLmNvbnRlbnQsZm9ybXtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbn1cblxuZm9ybXtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbi5idXR0b25zLWNvbnRhaW5lcntcbiAgZmxleC1iYXNpczogMTAwJTtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi5idXR0b25ze1xuICBtYXJnaW46IDJyZW07XG4gIHdpZHRoOiAzNXJlbTtcbn1cblxuYnV0dG9ue1xuICBjb2xvcjogd2hpdGU7XG4gIGJhY2tncm91bmQtY29sb3I6IGJsYWNrO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAzcmVtO1xuICBvcGFjaXR5OiAwLjg7XG4gIGZvbnQtc2l6ZTogMS4zcmVtO1xuICBib3JkZXI6IG5vbmU7XG4gIGJvcmRlci1yYWRpdXM6IDAuNXJlbTtcbiAgYm94LXNoYWRvdzogMnB4IDJweCAycHggMnB4IGdyZXk7XG59XG5cbmJ1dHRvbjpob3ZlcntcbiAgb3BhY2l0eTogMTtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nexport { CheckoutPageComponent };","map":{"version":3,"names":["Validators","Order","CheckoutPageComponent","constructor","cartService","formBuilder","userService","toastrService","orderService","router","order","cart","getCart","items","totalPrice","ngOnInit","name","address","currentUser","checkoutForm","group","required","fc","controls","createOrder","invalid","warning","addressLatLng","value","create","subscribe","next","navigateByUrl","error","errorResponse","i0","ɵɵdirectiveInject","i1","CartService","i2","FormBuilder","i3","UserService","i4","ToastrService","i5","OrderService","i6","Router","selectors","decls","vars","consts","template","CheckoutPageComponent_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵlistener","CheckoutPageComponent_Template_button_click_12_listener","ɵɵtext","ɵɵadvance","ɵɵproperty"],"sources":["D:\\projects\\shoe-selling-site\\frontend\\src\\app\\components\\pages\\checkout-page\\checkout-page.component.ts","D:\\projects\\shoe-selling-site\\frontend\\src\\app\\components\\pages\\checkout-page\\checkout-page.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { ToastrService } from 'ngx-toastr';\nimport { CartService } from 'src/app/services/cart.service';\nimport { OrderService } from 'src/app/services/order.service';\nimport { UserService } from 'src/app/services/user.service';\nimport { Order } from 'src/app/shared/models/Order';\n\n@Component({\n  selector: 'app-checkout-page',\n  templateUrl: './checkout-page.component.html',\n  styleUrls: ['./checkout-page.component.css']\n})\nexport class CheckoutPageComponent implements OnInit {\n  order:Order = new Order();\n  checkoutForm!: FormGroup;\n  constructor(cartService:CartService,\n              private formBuilder: FormBuilder,\n              private userService: UserService,\n              private toastrService: ToastrService,\n              private orderService: OrderService,\n              private router: Router) {\n                const cart = cartService.getCart();\n                this.order.items = cart.items;\n                this.order.totalPrice = cart.totalPrice;\n              }\n\n  ngOnInit(): void {\n    let {name, address} = this.userService.currentUser;\n    this.checkoutForm = this.formBuilder.group({\n      name:[name, Validators.required],\n      address:[address, Validators.required]\n    });\n  }\n\n  get fc(){\n    return this.checkoutForm.controls;\n  }\n\n  createOrder(){\n    if(this.checkoutForm.invalid){\n      this.toastrService.warning('Please fill the inputs', 'Invalid Inputs');\n      return;\n    }\n\n    if(!this.order.addressLatLng){\n      this.toastrService.warning('Please select your location on the map', 'Location');\n      return;\n    }\n\n    this.order.name = this.fc.name.value;\n    this.order.address = this.fc.address.value;\n\n    this.orderService.create(this.order).subscribe({\n      next:() => {\n        this.router.navigateByUrl('/payment');\n      },\n      error:(errorResponse) => {\n        this.toastrService.error(errorResponse.error, 'Cart');\n      }\n    })\n  }\n}\n","<div class=\"container\">\n  <div class=\"content\">\n    <app-title title=\"Order Form\" fontSize=\"1.6rem\"></app-title>\n    <form [formGroup]=\"checkoutForm\">\n      <text-input [control]=\"fc.name\" label=\"Name\"></text-input>\n      <text-input [control]=\"fc.address\" label=\"Address\"></text-input>\n    </form>\n    <order-items-list [order]=\"order\"></order-items-list>\n  </div>\n  <div class=\"map\">\n    <app-title\n    title=\"Choose Your Address On Map\"\n    fontSize=\"1.6rem\"></app-title>\n    <map [order]=\"order\"></map>\n  </div>\n  <div class=\"buttons-container\">\n    <div class=\"buttons\">\n      <button (click)=\"createOrder()\">\n        Go To Payment\n      </button>\n    </div>\n  </div>\n</div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}